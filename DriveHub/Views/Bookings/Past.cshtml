@using DriveHubModel;
@model IEnumerable<Booking>
@{
    ViewData["Title"] = "Past Bookings";
}

<style>
    a.booking-link {
        color: black;
    }

        a.booking-link :hover {
            background-color: #eeeeee;
            color: orange;
        }

    .img-fluid, img-fluid {
        border-radius: 15px;
        vertical-align: middle;
    }
</style>

<h1>@ViewData["Title"]</h1>
<p>Here are your past bookings.</p>

@if (Model.Count() == 0)
{
    <div class="row ms-1">
        You have no past bookings
    </div>
}
else
{
    <a asp-controller="Bookings" asp-action="PrintReport" class="btn btn-success mb-4 fw-bold text-white fs-4">
        Print report
    </a>
    foreach (var booking in Model)
    {
        string colour = "";

        switch (booking.BookingStatus)
        {
            case BookingStatus.Reserved:
                colour = "green";
                break;
            case BookingStatus.Collected:
                colour = "blue";
                break;
            case BookingStatus.Unpaid:
                colour = "orange";
                break;
            case BookingStatus.Complete:
                colour = "black";
                break;
            case BookingStatus.Expired:
                colour = "red";
                break;
            case BookingStatus.Cancelled:
                colour = "red";
                break;
            default:
                colour = "white";
                break;
        }
        <div class="row">
            <a asp-action="Details" asp-route-id="@booking.BookingId" class="booking-link text-decoration-none car-item">
                <div class="row border my-3 container-fluid">
                    <div class="col-xs-12 col-sm-3 col-lg-4">
                        <img class="img-fluid" src="https://drivehubstorage.blob.core.windows.net/vehicles/@{
                                    @booking.VehicleId
}.jpg" style="max-width:150px;">
                    </div>
                    <div class="col-xs-12 col-sm-8 col-lg-7">
                        <b>@booking.Vehicle.Name the @booking.Vehicle.Make @booking.Vehicle.Model</b><br />
                        Pickup at @booking.StartTime @booking.StartPod.Site.SiteName Pod #@booking.StartPod.PodName<br />
                        Drop off at @booking.EndTime @booking.EndPod?.Site.SiteName Pod #@booking.EndPod?.PodName
                    </div>
                    <div class="col-xs-12 col-sm-1 col-lg-1 d-flex align-items-center">
                        <b style="color:@colour">@booking.BookingStatus</b>
                    </div>
                </div>
            </a>
        </div>
    }
}