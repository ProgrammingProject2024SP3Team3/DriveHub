@using DriveHubModel;
@model IEnumerable<Booking>
@{
    ViewData["Title"] = "Past Bookings";
}

<style>
    a.booking-link {
        color: black;
    }

    a.booking-link :hover {
        background-color: #eeeeee;
        color: rgb(21, 140, 219);
    }

    .img-fluid, img-fluid {
        border-radius: 15px;
        vertical-align: middle;
    }
</style>

<h1 class="text-center text-dark fw-normal">@ViewData["Title"]</h1>
<p class="text-center">Here are your past bookings.</p>

@if (Model.Count() == 0)
{
    <div class="row ms-1">
        <p>You have no past bookings</p>
    </div>
}
else
{
    <a asp-controller="Bookings" asp-action="PrintReport" class="btn btn-success mb-4 fw-bold text-white fs-4">
        Print report
    </a>
    foreach (var booking in Model)
    {
        string colour = "";

        switch (booking.BookingStatus)
        {
            case BookingStatus.Reserved:
                colour = "green";
                break;
            case BookingStatus.Collected:
                colour = "blue";
                break;
            case BookingStatus.Unpaid:
                colour = "orange";
                break;
            case BookingStatus.Complete:
                colour = "black";
                break;
            case BookingStatus.Expired:
                colour = "red";
                break;
            case BookingStatus.Cancelled:
                colour = "red";
                break;
            default:
                colour = "white";
                break;
        }
        <div class="row">
            <a asp-action="Details" asp-route-id="@booking.BookingId" class="booking-link text-decoration-none">
                <div class="border-0 shadow-sm mb-3 hover-card">
                    <div class="row g-0 align-items-center">
                        <div class="col-lg-3 col-sm-4 p-3">
                            <img class="img-fluid rounded w-100 object-fit-cover shadow-sm" src="https://drivehubstorage.blob.core.windows.net/vehicles/@{@booking.VehicleId}.jpg" style="max-width:150px; height:100px;">
                        </div>
                        <div class="col-lg-7 col-sm-6 card-body">
                            <b>@booking.Vehicle.Name the @booking.Vehicle.Make @booking.Vehicle.Model</b><br />
                            Pickup at @booking.StartTime @booking.StartPod.Site.SiteName Pod #@booking.StartPod.PodName
                        </div>
                        <div class="col-lg-2 col-sm-2">
                            <b style="color:@colour">@booking.BookingStatus</b>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    }
}
